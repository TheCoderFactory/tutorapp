<% if @tutors.any? %>
  <% @tutors.each do |tutor| %>
    <p><%= tutor.full_name %></p>
  <% end %>
  <div id="map"></div>
  <script>
    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,
        center: {lat: -33.9, lng: 151.2}
      });

      setMarkers(map);
    }

    function setMarkers(map) {

      var image = {
        url: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
        // This marker is 20 pixels wide by 32 pixels high.
        size: new google.maps.Size(20, 32),
        // The origin for this image is (0, 0).
        origin: new google.maps.Point(0, 0),
        // The anchor for this image is the base of the flagpole at (0, 32).
        anchor: new google.maps.Point(0, 32)
      };
      // Shapes define the clickable region of the icon. The type defines an HTML
      // <area> element 'poly' which traces out a polygon as a series of X,Y points.
      // The final coordinate closes the poly by connecting to the first coordinate.
      var shape = {
        coords: [1, 1, 1, 20, 18, 20, 18, 1],
        type: 'poly'
      };
      <% @tutors.each do |tutor| %>
        var marker = new google.maps.Marker({
          position: {lat: <%= tutor.latitude %>, lng: <%= tutor.longitude %>},
          map: map,
          icon: image,
          shape: shape,
          title: "<%= tutor.full_name %>"
        });
        <% end %>
      }
    
  </script>



  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAel2sOgAjOR1qEWpL8Qe0eYiP2DYNtyk8&callback=initMap"
    async defer></script>

<% else %>
  <p>Sorry, there are no tutors in your area. Try your search again.</p>
<% end %>
